{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\E072894\\\\Documents\\\\repos\\\\nodejs\\\\nextjs_repos\\\\ssr_refresh_token\\\\web\\\\pages\\\\login.tsx\";\nvar __jsx = React.createElement;\nimport React, { useState } from 'react';\nimport Layout from '../components/Layout';\nimport { useLoginMutation, MeDocument } from '../generated/graphql';\nimport { setAccessToken } from '../lib/accessToken';\nimport Router from 'next/router';\nexport default (() => {\n  const {\n    0: email,\n    1: setEmail\n  } = useState('');\n  const {\n    0: password,\n    1: setPassword\n  } = useState('');\n  const [login] = useLoginMutation();\n  return __jsx(Layout, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 13,\n      columnNumber: 5\n    }\n  }, __jsx(\"form\", {\n    onSubmit: async e => {\n      e.preventDefault();\n      console.log('form submitted');\n      const response = await login({\n        variables: {\n          email,\n          password\n        },\n        update: (store, {\n          data\n        }) => {\n          if (!data) {\n            return null;\n          }\n\n          store.writeQuery({\n            query: MeDocument,\n            data: {\n              me: data.login.user\n            }\n          });\n        }\n      });\n      console.log(response);\n\n      if (response && response.data) {\n        setAccessToken(response.data.login.accessToken);\n      }\n\n      Router.push('/');\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 14,\n      columnNumber: 7\n    }\n  }, __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 9\n    }\n  }, __jsx(\"input\", {\n    value: email,\n    placeholder: \"email\",\n    onChange: e => {\n      setEmail(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 11\n    }\n  })), __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 9\n    }\n  }, __jsx(\"input\", {\n    type: \"password\",\n    value: password,\n    placeholder: \"password\",\n    onChange: e => {\n      setPassword(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 11\n    }\n  })), __jsx(\"button\", {\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }\n  }, \"login\")));\n});","map":{"version":3,"sources":["C:/Users/E072894/Documents/repos/nodejs/nextjs_repos/ssr_refresh_token/web/pages/login.tsx"],"names":["React","useState","Layout","useLoginMutation","MeDocument","setAccessToken","Router","email","setEmail","password","setPassword","login","e","preventDefault","console","log","response","variables","update","store","data","writeQuery","query","me","user","accessToken","push","target","value"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,OAAOC,MAAP,MAAmB,sBAAnB;AACA,SAASC,gBAAT,EAAoCC,UAApC,QAAsD,sBAAtD;AACA,SAASC,cAAT,QAA+B,oBAA/B;AACA,OAAOC,MAAP,MAAmB,aAAnB;AAEA,gBAAe,MAAM;AACnB,QAAM;AAAA,OAACC,KAAD;AAAA,OAAQC;AAAR,MAAoBP,QAAQ,CAAC,EAAD,CAAlC;AACA,QAAM;AAAA,OAACQ,QAAD;AAAA,OAAWC;AAAX,MAA0BT,QAAQ,CAAC,EAAD,CAAxC;AACA,QAAM,CAACU,KAAD,IAAUR,gBAAgB,EAAhC;AAEA,SACE,MAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AACE,IAAA,QAAQ,EAAE,MAAOS,CAAP,IAAa;AACrBA,MAAAA,CAAC,CAACC,cAAF;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ;AACA,YAAMC,QAAQ,GAAG,MAAML,KAAK,CAAC;AAC3BM,QAAAA,SAAS,EAAE;AACTV,UAAAA,KADS;AAETE,UAAAA;AAFS,SADgB;AAK3BS,QAAAA,MAAM,EAAE,CAACC,KAAD,EAAQ;AAAEC,UAAAA;AAAF,SAAR,KAAqB;AAC3B,cAAI,CAACA,IAAL,EAAW;AACT,mBAAO,IAAP;AACD;;AAEDD,UAAAA,KAAK,CAACE,UAAN,CAA0B;AACxBC,YAAAA,KAAK,EAAElB,UADiB;AAExBgB,YAAAA,IAAI,EAAE;AACJG,cAAAA,EAAE,EAAEH,IAAI,CAACT,KAAL,CAAWa;AADX;AAFkB,WAA1B;AAMD;AAhB0B,OAAD,CAA5B;AAmBAV,MAAAA,OAAO,CAACC,GAAR,CAAYC,QAAZ;;AAEA,UAAIA,QAAQ,IAAIA,QAAQ,CAACI,IAAzB,EAA+B;AAC7Bf,QAAAA,cAAc,CAACW,QAAQ,CAACI,IAAT,CAAcT,KAAd,CAAoBc,WAArB,CAAd;AACD;;AAEDnB,MAAAA,MAAM,CAACoB,IAAP,CAAY,GAAZ;AACD,KA9BH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAgCE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AACE,IAAA,KAAK,EAAEnB,KADT;AAEE,IAAA,WAAW,EAAC,OAFd;AAGE,IAAA,QAAQ,EAAGK,CAAD,IAAO;AACfJ,MAAAA,QAAQ,CAACI,CAAC,CAACe,MAAF,CAASC,KAAV,CAAR;AACD,KALH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAhCF,EAyCE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AACE,IAAA,IAAI,EAAC,UADP;AAEE,IAAA,KAAK,EAAEnB,QAFT;AAGE,IAAA,WAAW,EAAC,UAHd;AAIE,IAAA,QAAQ,EAAGG,CAAD,IAAO;AACfF,MAAAA,WAAW,CAACE,CAAC,CAACe,MAAF,CAASC,KAAV,CAAX;AACD,KANH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAzCF,EAmDE;AAAQ,IAAA,IAAI,EAAC,QAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAnDF,CADF,CADF;AAyDD,CA9DD","sourcesContent":["import React, { useState } from 'react'\r\nimport Layout from '../components/Layout'\r\nimport { useLoginMutation, MeQuery, MeDocument } from '../generated/graphql'\r\nimport { setAccessToken } from '../lib/accessToken'\r\nimport Router from 'next/router'\r\n\r\nexport default () => {\r\n  const [email, setEmail] = useState('')\r\n  const [password, setPassword] = useState('')\r\n  const [login] = useLoginMutation()\r\n\r\n  return (\r\n    <Layout>\r\n      <form\r\n        onSubmit={async (e) => {\r\n          e.preventDefault()\r\n          console.log('form submitted')\r\n          const response = await login({\r\n            variables: {\r\n              email,\r\n              password,\r\n            },\r\n            update: (store, { data }) => {\r\n              if (!data) {\r\n                return null\r\n              }\r\n\r\n              store.writeQuery<MeQuery>({\r\n                query: MeDocument,\r\n                data: {\r\n                  me: data.login.user,\r\n                },\r\n              })\r\n            },\r\n          })\r\n\r\n          console.log(response)\r\n\r\n          if (response && response.data) {\r\n            setAccessToken(response.data.login.accessToken)\r\n          }\r\n\r\n          Router.push('/')\r\n        }}\r\n      >\r\n        <div>\r\n          <input\r\n            value={email}\r\n            placeholder=\"email\"\r\n            onChange={(e) => {\r\n              setEmail(e.target.value)\r\n            }}\r\n          />\r\n        </div>\r\n        <div>\r\n          <input\r\n            type=\"password\"\r\n            value={password}\r\n            placeholder=\"password\"\r\n            onChange={(e) => {\r\n              setPassword(e.target.value)\r\n            }}\r\n          />\r\n        </div>\r\n        <button type=\"submit\">login</button>\r\n      </form>\r\n    </Layout>\r\n  )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}